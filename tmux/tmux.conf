unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

set -g @plugin "tmux-plugins/tpm"
set -g @plugin "tmux-plugins/tmux-sensible"
set -g @plugin "christoomey/vim-tmux-navigator"
set -g @plugin "sainnhe/tmux-fzf"

set -g default-terminal "$TERM"
set -ag terminal-overrides ",$TERM:RGB"

set -g mouse on

set-option -g detach-on-destroy off

bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -a -c "#{pane_current_path}"

bind w move-window -t 0
bind e move-window -t 10000

bind K kill-session
bind s choose-session -ZsK '#{?#{e|<:#{line},9},#{e|+:1,#{line}},#{?#{e|<:#{line},35},M-#{a:#{e|+:97,#{e|-:#{line},9}}},}}'
bind o popup -E "~/.config/tmux/scripts/switch-session.sh"
bind S popup -E "~/.config/tmux/scripts/new-session.sh"
bind N run-shell "~/.config/tmux/scripts/extract-session.sh #{pane_current_path}"

bind g popup -E -h 90% -w 90% -d "#{pane_current_path}" 'env XDG_CONFIG_HOME="$HOME/.config" \lazygit "$@"'

bind . next-window
bind , previous-window

bind k copy-mode \; send-keys -X halfpage-up
bind -T copy-mode k send-keys -X halfpage-up
bind -T copy-mode j send-keys -X halfpage-down
bind -T copy-mode C-k send-keys -X page-up
bind -T copy-mode C-j send-keys -X page-down

run "~/.config/tmux/scripts/theme.sh"
run "~/.config/tmux/plugins/tpm/tpm"
